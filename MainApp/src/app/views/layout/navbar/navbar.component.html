<nav class="navbar">
  <a href="" class="sidebar-toggler" (click)="toggleSidebar($event)">
    <i class="feather icon-menu"></i>
  </a>
  <div class="navbar-content">

    <ul class="navbar-nav">

      <li class="nav-item dropdown mr-3 mt-2" ngbDropdown>
        <a class="nav-link dropdown-toggle" id="notificationDropdown" ngbDropdownToggle role="button" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-bell"><path d="M18 8A6 6 0 0 0 6 8c0 7-3 9-3 9h18s-3-2-3-9"></path><path d="M13.73 21a2 2 0 0 1-3.46 0"></path></svg>
          <div class="indicator" *ngIf="notifications && notifications.length > 0">
            <div class="circle"></div>
          </div>
        </a>
        <div class="dropdown-menu p-0" ngbDropdownMenu aria-labelledby="notificationDropdown" style="min-width: 280px" data-bs-popper="static">
          <div class="px-3 py-2 d-flex align-items-center justify-content-between border-bottom">
            <p *ngIf="notifications">{{ notifications.length }} New Notifications</p>
            <p *ngIf="!notifications">No New Notifications</p>
          </div>
          <div class="notification-list">
            <div class="p-1" *ngFor="let notification of notifications">
              <a href="javascript:;" class="dropdown-item d-flex align-items-center py-2">
                <div class="wd-30 ht-30 d-flex align-items-center justify-content-center bg-primary rounded-circle mr-3">
                  <svg xmlns="http://www.w3.org/2000/svg" style= "
                  max-width: 24;
                  min-width: 24;
                  max-height: 24;
                  min-height: 24;"
                   viewBox="0 0 24 24" fill="none" stroke="currentColor"
                    stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                    class="feather feather-alert-circle icon-sm text-white">
                    <circle cx="12" cy="12" r="10"></circle>
                    <line x1="12" y1="8" x2="12" y2="12"></line>
                    <line x1="12" y1="16" x2="12.01" y2="16"></line>
                  </svg>
                </div>
                <div class="flex-grow-1 me-2">
                  <p style="overflow-wrap: anywhere">{{ notification.messageToBeDisplayed }}</p>
                  <p class="tx-12 text-muted" *ngIf="today.getDate() - notification.createdAt.getDate() === 0">{{notification.createdAt | date: "shortTime"}}</p>
                  <p class="tx-12 text-muted" *ngIf="today.getDate() - notification.createdAt.getDate() === 1">yesterday</p>
                  <p class="tx-12 text-muted" *ngIf="today.getDate() - notification.createdAt.getDate() !== 0 && today.getDate() - notification.createdAt.getDate() !== 1">{{notification.createdAt | date: "mediumDate"}}</p>
                </div>
              </a>
            </div>
          </div>

          <div class="px-3 py-2 d-flex align-items-center justify-content-center border-top">
            <a (click)="clearAllNotification()">Clear all</a>
          </div>
        </div>

      </li>

      <li class="nav-item nav-profile" ngbDropdown>
        <a class="nav-link" ngbDropdownToggle id="profileDropdown">
          <img [src]="this.loggedInUser.imageUrl" alt="profile">
        </a>
        <div ngbDropdownMenu aria-labelledby="profileDropdown">
          <div class="dropdown-header d-flex flex-column align-items-center">
            <div class="figure mb-3">
              <img [src]="this.loggedInUser.imageUrl" alt="">
            </div>
            <div class="info text-center">
              <p class="name font-weight-bold mb-0">{{loggedInUser.firstName}} {{loggedInUser.lastName}}</p>
              <p class="email text-muted mb-3">{{loggedInUser.email}}</p>
            </div>
          </div>
          <div class="dropdown-body">
            <ul class="profile-nav p-0 pt-3">

              <li class="nav-item">
                <a [routerLink]="['edit']" routerLinkActive="router-link-active"  class="nav-link">
                  <i class="feather icon-edit"></i>
                  <span>Edit Profile</span>
                </a>
              </li>

              <li class="nav-item">
                <a href="" (click)="onLogout($event)" class="nav-link">
                  <i class="feather icon-log-out"></i>
                  <span>Log Out</span>
                </a>
              </li>
            </ul>
          </div>
        </div>
      </li>
    </ul>
  </div>
</nav>
