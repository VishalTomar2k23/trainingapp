<div class="aside-content">

  <!-- left column header :- contains logged in user's basic info and a search button to search the friend -->
  <div class="aside-header">
    <div class="d-flex justify-content-between align-items-center pb-2 mb-2">
      <div class="d-flex align-items-center">
        <figure class="mr-2 mb-0">
          <!-- logged in user photo -->
          <img [src]="loggedInUser.imageUrl" class="img-sm rounded-circle" alt="profile">
          <div class="status online"></div>
        </figure>
        <div>
          <!-- logged in user name -->
          <h6>{{loggedInUser.firstName}} {{loggedInUser.lastName}}</h6>
          <!-- logged in user designation -->
          <p class="text-muted tx-13">{{loggedInUser.designation}}</p>
        </div>
      </div>
      <div class="dropdown" ngbDropdown>
        <button class="btn p-0 no-dropdown-toggle-icon" type="button" id="dropdownMenuButton" ngbDropdownToggle>
          <i class="feather icon-settings icon-md text-muted pb-3px" ngbTooltip="Settings"></i>
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" ngbDropdownMenu>
          <a class="dropdown-item d-flex align-items-center" href="" (click)="false"><i
              class="feather icon-eye icon-xs mr-2"></i> <span class="">View Profile</span></a>
          <a class="dropdown-item d-flex align-items-center" href="" (click)="false"><i
              class="feather icon-edit-2 icon-xs mr-2"></i> <span class="">Edit Profile</span></a>
          <a class="dropdown-item d-flex align-items-center" href="" (click)="false"><i
              class="feather icon-aperture icon-xs mr-2"></i> <span class="">Add status</span></a>
          <a class="dropdown-item d-flex align-items-center" href="" (click)="false"><i
              class="feather icon-settings icon-xs mr-2"></i> <span class="">Settings</span></a>
        </div>
      </div>
    </div>



    <!-- dropdown to show friends list -->
    <app-friends-dropdown></app-friends-dropdown>


  </div>
  <!-- left column header end -->

  <!-- left column body start -->
  <div class="aside-body" [perfectScrollbar] style=" z-index: 50">

    <!-- navigation bar but we want only chats feature that is why there is no other options except chats -->
    <ul ngbNav #defaultNav="ngbNav" [(activeId)]="defaultNavActiveId" class="nav-tabs mt-3">
      <li [ngbNavItem]="1">
        <a ngbNavLink>
          <div class="d-flex flex-row flex-lg-column flex-xl-row align-items-center">
            <i class="feather icon-message-square icon-xs mr-sm-2 mr-lg-0 mr-xl-2 mb-md-1 mb-xl-0"></i>
            <p class="d-none d-sm-block">Chats</p>
          </div>
        </a>
        <ng-template ngbNavContent>
          <div class="ps">
            <p class="text-muted mb-1">Recent chats</p>
            <div [perfectScrollbar]>
              <ul class="list-unstyled chat-list px-1">

                <!-- Repeatation start -->
                <li class="chat-item pr-1" *ngFor="let friend of friends">
                  <a (click)="onClickUser(friend)" class="d-flex align-items-center">

                    <figure class="mb-0 mr-2">
                      <!-- profile picture -->
                      <img [src]="friend.imageUrl" class="img-xs rounded-circle" alt="user">
                      <div class="status online"></div>
                    </figure>

                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <!-- name  -->
                        <p class="text-body font-weight-bold">{{friend.firstName}} {{friend.lastName }}</p>
                        <!-- last message -->
                        <p class="text-muted tx-13">{{friend.lastMessage}}</p>
                      </div>

                      <div class="d-flex flex-column align-items-end">
                        <!-- last message time -->
                        <p class="text-muted tx-13 mb-1">{{friend.lastMessageTimeStamp | date: "shortTime"}} </p>
                        <!-- unread message count -->
                        <div *ngIf="friend.unreadMessageCount>0" class="unread-count-parent">
                          <div class="badge badge-pill badge-primary ml-auto">
                            {{ friend.unreadMessageCount }}

                          </div>
                          <div class="mark-as-read-button ml-1" ngbTooltip="Mark As Read" placement="left" (click)="markAsRead($event, friend)">
                            <i class="pi pi-check"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                </li>
                <!-- Repeatation end -->

                <!-- <li class="chat-item pr-1">
                  <a href="" (click)="false" class="d-flex align-items-center">
                    <figure class="mb-0 mr-2">
                      <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                      <div class="status offline"></div>
                    </figure>
                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <p class="text-body font-weight-bold">Carl Henson</p>
                        <div class="d-flex align-items-center">
                          <i class="feather icon-image text-muted icon-sm mb-2px"></i>
                          <p class="text-muted ml-1">Photo</p>
                        </div>
                      </div>
                      <div class="d-flex flex-column align-items-end">
                        <p class="text-muted tx-13 mb-1">05:24 PM</p>
                        <div class="badge badge-pill badge-danger ml-auto">3</div>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="chat-item pr-1">
                  <a href="" (click)="false" class="d-flex align-items-center">
                    <figure class="mb-0 mr-2">
                      <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                      <div class="status offline"></div>
                    </figure>
                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <p class="text-body">John Doe</p>
                        <p class="text-muted tx-13">Hi, How are you?</p>
                      </div>
                      <div class="d-flex flex-column align-items-end">
                        <p class="text-muted tx-13 mb-1">Yesterday</p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="chat-item pr-1">
                  <a href="" (click)="false" class="d-flex align-items-center">
                    <figure class="mb-0 mr-2">
                      <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                      <div class="status online"></div>
                    </figure>
                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <p class="text-body">Jensen Combs</p>
                        <div class="d-flex align-items-center">
                          <i class="feather icon-video text-muted icon-sm mb-2px"></i>
                          <p class="text-muted ml-1">Video</p>
                        </div>
                      </div>
                      <div class="d-flex flex-column align-items-end">
                        <p class="text-muted tx-13 mb-1">2 days ago</p>
                      </div>
                    </div>
                  </a>
                </li> -->
                <!-- <li class="chat-item pr-1">
                  <a href="" (click)="false" class="d-flex align-items-center">
                    <figure class="mb-0 mr-2">
                      <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                      <div class="status offline"></div>
                    </figure>
                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <p class="text-body">Yaretzi Mayo</p>
                        <p class="text-muted tx-13">Hi, How are you?</p>
                      </div>
                      <div class="d-flex flex-column align-items-end">
                        <p class="text-muted tx-13 mb-1">4 week ago</p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="chat-item pr-1">
                  <a href="" (click)="false" class="d-flex align-items-center">
                    <figure class="mb-0 mr-2">
                      <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                      <div class="status offline"></div>
                    </figure>
                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <p class="text-body font-weight-bold">John Doe</p>
                        <p class="text-muted tx-13">Hi, How are you?</p>
                      </div>
                      <div class="d-flex flex-column align-items-end">
                        <p class="text-muted tx-13 mb-1">4:32 PM</p>
                        <div class="badge badge-pill badge-primary ml-auto">5</div>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="chat-item pr-1">
                  <a href="" (click)="false" class="d-flex align-items-center">
                    <figure class="mb-0 mr-2">
                      <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                      <div class="status online"></div>
                    </figure>
                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <p class="text-body font-weight-bold">Leonardo Payne</p>
                        <div class="d-flex align-items-center">
                          <i class="feather icon-image text-muted icon-sm mb-2px"></i>
                          <p class="text-muted ml-1">Photo</p>
                        </div>
                      </div>
                      <div class="d-flex flex-column align-items-end">
                        <p class="text-muted tx-13 mb-1">6:11 PM</p>
                        <div class="badge badge-pill badge-danger ml-auto">3</div>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="chat-item pr-1">
                  <a href="" (click)="false" class="d-flex align-items-center">
                    <figure class="mb-0 mr-2">
                      <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                      <div class="status online"></div>
                    </figure>
                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <p class="text-body">John Doe</p>
                        <p class="text-muted tx-13">Hi, How are you?</p>
                      </div>
                      <div class="d-flex flex-column align-items-end">
                        <p class="text-muted tx-13 mb-1">Yesterday</p>
                      </div>
                    </div>
                  </a>
                </li>
                <li class="chat-item pr-1">
                  <a href="" (click)="false" class="d-flex align-items-center">
                    <figure class="mb-0 mr-2">
                      <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                      <div class="status online"></div>
                    </figure>
                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <p class="text-body">Leonardo Payne</p>
                        <div class="d-flex align-items-center">
                          <i class="video text-muted icon-sm mb-2px"></i>
                          <p class="text-muted ml-1">Video</p>
                        </div>
                      </div>
                      <div class="d-flex flex-column align-items-end">
                        <p class="text-muted tx-13 mb-1">2 days ago</p>
                      </div>
                    </div>
                  </a>
                </li> -->
                <!-- <li class="chat-item pr-1">
                  <a href="" (click)="false" class="d-flex align-items-center">
                    <figure class="mb-0 mr-2">
                      <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                      <div class="status online"></div>
                    </figure>
                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <p class="text-body">John Doe</p>
                        <p class="text-muted tx-13">Hi, How are you?</p>
                      </div>
                      <div class="d-flex flex-column align-items-end">
                        <p class="text-muted tx-13 mb-1">4 week ago</p>
                      </div>
                    </div>
                  </a>
                </li> -->
              </ul>
            </div>
          </div>
        </ng-template>
      </li>
      <!-- End chat tab-->
    </ul>
    <div [ngbNavOutlet]="defaultNav" class="mt-3"></div>
  </div>
</div>
