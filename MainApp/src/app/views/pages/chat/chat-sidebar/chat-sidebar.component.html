<div class="aside-content">
  <div class="aside-header">
    <div class="d-flex justify-content-between align-items-center pb-2 mb-2">
      <div class="d-flex align-items-center">
        <figure class="mr-2 mb-0">
          <img [src]="loggedInUser.imageUrl" class="img-sm rounded-circle" alt="profile">
          <div class="status online"></div>
        </figure>
        <div>
          <h6>{{loggedInUser.firstName}} {{loggedInUser.lastName}}</h6>
          <p class="text-muted tx-13">{{loggedInUser.designation}}</p>
        </div>
      </div>
    </div>

    <app-friends-dropdown></app-friends-dropdown>

  </div>
  <div class="aside-body" [perfectScrollbar] style=" z-index: 50">

    <!-- navigation bar but we want only chats feature that is why there is no other options except chats -->
    <ul ngbNav #defaultNav="ngbNav" [(activeId)]="defaultNavActiveId" class="nav-tabs mt-3">
      <li [ngbNavItem]="1">
        <a ngbNavLink>
          <div class="d-flex flex-row flex-lg-column flex-xl-row align-items-center">
            <i class="feather icon-message-square icon-xs mr-sm-2 mr-lg-0 mr-xl-2 mb-md-1 mb-xl-0"></i>
            <p class="d-none d-sm-block">Chats</p>
          </div>
        </a>
        <ng-template ngbNavContent>
          <div class="ps">
            <p class="text-muted mb-1">Recent chats</p>
            <div [perfectScrollbar]>
              <ul class="list-unstyled chat-list px-1">

                <li class="chat-item pr-1" *ngFor="let friend of friends">
                  <a (click)="onClickUser(friend)" class="d-flex align-items-center">

                    <figure class="mb-0 mr-2">
                      <img [src]="friend.imageUrl" class="img-xs rounded-circle" alt="user">
                      <div class="status online"></div>
                    </figure>

                    <div class="d-flex justify-content-between flex-grow border-bottom">
                      <div>
                        <p class="text-body font-weight-bold">{{friend.firstName}} {{friend.lastName }}</p>
                        <p class="text-muted tx-13">{{friend.lastMessage}}</p>
                      </div>

                      <div class="d-flex flex-column align-items-end">
                        <p class="text-muted tx-13 mb-1" *ngIf="today - friend.lastMessageTimeStamp.getDate() === 0">{{friend.lastMessageTimeStamp | date: "shortTime"}} </p>
                        <p class="text-muted tx-13 mb-1" *ngIf="today - friend.lastMessageTimeStamp.getDate() === 1">Yesterday </p>
                        <p class="text-muted tx-13 mb-1" *ngIf="today - friend.lastMessageTimeStamp.getDate() !== 0 && today - friend.lastMessageTimeStamp.getDate() !== 1">{{friend.lastMessageTimeStamp | date: "medidumDate"}} </p>
                        <div *ngIf="friend.unreadMessageCount>0" class="unread-count-parent">
                          <div class="badge badge-pill badge-primary ml-auto">
                            {{ friend.unreadMessageCount }}

                          </div>
                          <div class="mark-as-read-button ml-1" ngbTooltip="Mark As Read" placement="left" (click)="markAsRead($event, friend)">
                            <i class="pi pi-check"></i>
                          </div>
                        </div>
                      </div>
                    </div>
                  </a>
                </li>

              </ul>
            </div>
          </div>
        </ng-template>
      </li>
    </ul>
    <div [ngbNavOutlet]="defaultNav" class="mt-3"></div>
  </div>
</div>
