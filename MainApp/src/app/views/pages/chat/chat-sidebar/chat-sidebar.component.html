<div class="aside-content">
  <div class="aside-header">
    <div class="d-flex justify-content-between align-items-center pb-2 mb-2">
      <div class="d-flex align-items-center">
        <figure class="mr-2 mb-0">
          <img [src]="imageSource" class="img-sm rounded-circle" alt="profile">
          <div *ngIf="loggedInUser.status=='Available'" class="mdi mdi-checkbox-blank-circle active stat"></div>
          <div *ngIf="loggedInUser.status=='Do Not Disturb'" class="mdi mdi-minus-circle red stat"></div>
          <div *ngIf="loggedInUser.status=='Busy'" class="mdi mdi-checkbox-blank-circle red stat"></div>
          <div *ngIf="loggedInUser.status=='Be Right Back'" class="mdi mdi-clock-fast yellow stat"></div>
          <div *ngIf="loggedInUser.status=='Away'" class="mdi mdi-clock yellow stat"></div>
          <div *ngIf="loggedInUser.status=='Offline'" class="mdi mdi-close-circle stat"></div>
        </figure>
        <div>
          <h6>{{loggedInUser.firstName}} {{loggedInUser.lastName}}</h6>
          <p class="text-muted tx-13">{{loggedInUser.designation}}</p>
        </div>
      </div>
      <div class="dropdown" ngbDropdown>
        <button class="btn p-0 no-dropdown-toggle-icon" type="button" id="dropdownMenuButton" ngbDropdownToggle>
          <i class="feather icon-settings icon-md text-muted pb-3px" ngbTooltip="Settings"></i>
        </button>
        <div class="dropdown-menu" aria-labelledby="dropdownMenuButton" ngbDropdownMenu>
          <a class="dropdown-item d-flex align-items-center"  (click)="onViewProfile()"><i class="feather icon-eye icon-xs mr-2"></i> <span class="">View Profile</span></a>
          <a class="dropdown-item d-flex align-items-center"  (click)="onEditProfile()"><i class="feather icon-edit-2 icon-xs mr-2"></i> <span class="">Edit Profile</span></a>
          <a ngbDropdown placement="right" #drop="ngbDropdown" (mouseover)='over(drop)' (mouseout)='out(drop)' class="dropdown-item d-flex align-items-center" ><i class="feather icon-aperture icon-xs mr-2"></i> <div id="droprightMenu" ngbDropdownToggle>Add status
          <!-- DROPDOWN -->
            <div ngbDropdownMenu aria-labelledby="droprightMenu" >
              <div *ngFor="let item of statusList">
              <button *ngIf="item.id==1" ngbDropdownItem (click)="statusChange(1,item.status)"><span class="mdi mdi-checkbox-blank-circle active"></span>&nbsp;&nbsp;{{item.status}}</button>
              <button *ngIf="item.id==2" ngbDropdownItem (click)="statusChange(2,item.status)"><span class="mdi mdi-minus-circle red"></span>&nbsp;&nbsp;{{item.status}}</button>
              <button *ngIf="item.id==3" ngbDropdownItem (click)="statusChange(3,item.status)"><span class="mdi mdi-checkbox-blank-circle red"></span>&nbsp;&nbsp;{{item.status}}</button>
              <button *ngIf="item.id==4" ngbDropdownItem (click)="statusChange(4,item.status)"><span class="mdi mdi-clock-fast yellow"></span>&nbsp;&nbsp;{{item.status}}</button>
              <button *ngIf="item.id==5" ngbDropdownItem (click)="statusChange(5,item.status)"><span class="mdi mdi-clock yellow"></span>&nbsp;&nbsp;{{item.status}}</button>
              <button *ngIf="item.id==6" ngbDropdownItem (click)="statusChange(6,item.status)"><span class="mdi mdi-close-circle"></span>&nbsp;&nbsp;{{item.status}}</button>
              </div>
              <!-- <button ngbDropdownItem>Another Action</button>
              <button ngbDropdownItem>Something else is here</button> -->
            </div>
          <!-- CLOSE DROPDOWN -->
        </div></a>
          <a class="dropdown-item d-flex align-items-center" href="" (click)="false"><i class="feather icon-settings icon-xs mr-2"></i> <span class="">Settings</span></a>
        </div>
      </div>
    </div>
    <form class="search-form">
      <div class="input-group border rounded-sm">
        <div class="input-group-prepend">
          <div class="input-group-text border-0 rounded-sm">
            <i class="feather icon-search icon-sm cursor-pointer"></i>
          </div>
        </div>
        <input type="text" class="form-control  border-0 rounded-sm" id="searchForm" placeholder="Search here..." (input)="onSearch($event)">
      </div>
      <!-- DROPDOWN -->
      <div class="dropdown" *ngIf="showDropDown" appClickOutside (clickedOutside)="Outside()" style="position: absolute;z-index: 100; background-color: white; width:80%;">
        <div class="dropdown-item pl-0" *ngFor="let colleague of colleagues , let i = index " (click)="onColleagueSelected(colleague)" [routerLink]="[colleague.userName]">
          <div class="d-inline-flex" >
            <div>
              <img [src]="ImageStartUrl + colleague.imagePath" alt="" class="img-xs rounded-circle mr-3" />
            </div>
            <div>
              <p>{{colleague.firstName}} {{colleague.lastName}}</p>
              <p class="text-muted">@{{colleague.userName}}</p>
            </div>
          </div>
        </div>
      </div>
    </form>
  </div>
  <div class="aside-body">
    <ul ngbNav #defaultNav="ngbNav" class="nav-tabs mt-3">
      <li [ngbNavItem]="1">
        <a ngbNavLink>
          <div class="d-flex flex-row flex-lg-column flex-xl-row align-items-center">
            <i class="feather icon-message-square icon-xs mr-sm-2 mr-lg-0 mr-xl-2 mb-md-1 mb-xl-0"></i>
            <p class="d-none d-sm-block">Chats</p>
          </div>
        </a>
        <ng-template ngbNavContent>
          <div class="ps" [perfectScrollbar]>
            <div style="display: flex; justify-content: space-between;">
              <p class="text-muted mb-1">Recent chats</p>
              <p class="text-muted mb-1 mdi mdi-checkbox-multiple-marked-outline onhoverr"  title="Mark all as read" (click)="markAllAsRead()"></p>
            </div>
            <ul class="list-unstyled chat-list px-1"  *ngFor="let recent of recentChatList , let i = index" (click)="removeMarkCount(recent.userName)" [routerLink]="[recent.userName]" >
              <li class="chat-item pr-1">
                <a  class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img [src]="ImageStartUrl + recent.imagePath" class="img-xs rounded-circle" alt="user">
                    <div class="status online"></div>
                  </figure>
                  <div class="d-flex justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body font-weight-bold">{{recent.firstName}} {{recent.lastName}}</p>
                      <p *ngIf="recent.type == null" class="text-muted tx-13">{{recent.content | slice:0:30}}{{recent.content.length<30?'':'...'}}</p>
                      <p *ngIf="recent.type == 'audio'" class="text-muted tx-13">Audio</p>
                      <p *ngIf="recent.type == 'video'" class="text-muted tx-13">Video</p>
                      <p *ngIf="recent.type == 'image'" class="text-muted tx-13">Photo</p>
                    </div>
                    <div class="d-flex flex-column align-items-end">
                      <div style="display: flex;">
                        <p class="text-muted tx-13 mb-1  mdi mdi-checkbox-marked-outline"  title="Mark as read" (click)="markAsRead($event ,recent.userName)"></p>
                       <p class="text-muted tx-13 mb-1">{{recentChatDate(recent.createdAt)}}</p>
                      </div>
                    <div class="badge badge-pill badge-primary ml-auto" *ngIf="recent.seen > 0">{{recent.seen}}</div>
                    </div>
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </ng-template>
      </li>  <!-- End chat tab-->
      <!-- <li [ngbNavItem]="2">
        <a ngbNavLink>
          <div class="d-flex flex-row flex-lg-column flex-xl-row align-items-center">
            <i class="feather icon-phone-call icon-xs mr-sm-2 mr-lg-0 mr-xl-2 mb-md-1 mb-xl-0"></i>
            <p class="d-none d-sm-block">Calls</p>
          </div>
        </a>
        <ng-template ngbNavContent>
          <div class="ps" [perfectScrollbar]>
            <p class="text-muted mb-1">Recent calls</p>
            <ul class="list-unstyled chat-list px-1">
              <li class="chat-item pr-1">
                <a href="" (click)="false" class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                    <div class="status online"></div>
                  </figure>
                  <div class="d-flex align-items-center justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body">Jensen Combs</p>
                      <div class="d-flex align-items-center">
                        <i class="feather icon-arrow-up-right icon-xs text-success mr-1"></i>
                        <p class="text-muted tx-13">Today, 03:11 AM</p>
                      </div>
                    </div>
                    <div class="d-flex flex-column align-items-end">
                      <i class="feather icon-phone-call text-success icon-sm"></i>
                    </div>
                  </div>
                </a>
              </li>
              <li class="chat-item pr-1">
                <a href="" (click)="false" class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                    <div class="status offline"></div>
                  </figure>
                  <div class="d-flex align-items-center justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body">Leonardo Payne</p>
                      <div class="d-flex align-items-center">
                        <i class="feather icon-arrow-down-left icon-xs text-success mr-1"></i>
                        <p class="text-muted tx-13">Today, 11:41 AM</p>
                      </div>
                    </div>
                    <div class="d-flex flex-column align-items-end">
                      <i class="feather icon-video text-success icon-sm"></i>
                    </div>
                  </div>
                </a>
              </li>
              <li class="chat-item pr-1">
                <a href="" (click)="false" class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                    <div class="status offline"></div>
                  </figure>
                  <div class="d-flex align-items-center justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body">Carl Henson</p>
                      <div class="d-flex align-items-center">
                        <i class="feather icon-arrow-down-left icon-xs text-danger mr-1"></i>
                        <p class="text-muted tx-13">Today, 04:24 PM</p>
                      </div>
                    </div>
                    <div class="d-flex flex-column align-items-end">
                      <i class="feather icon-phone-call text-danger icon-sm"></i>
                    </div>
                  </div>
                </a>
              </li>
              <li class="chat-item pr-1">
                <a href="" (click)="false" class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                    <div class="status online"></div>
                  </figure>
                  <div class="d-flex align-items-center justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body">Jensen Combs</p>
                      <div class="d-flex align-items-center">
                        <i class="feather icon-arrow-down-left icon-xs text-danger mr-1"></i>
                        <p class="text-muted tx-13">Today, 12:53 AM</p>
                      </div>
                    </div>
                    <div class="d-flex flex-column align-items-end">
                      <i class="feather icon-video text-danger icon-sm"></i>
                    </div>
                  </div>
                </a>
              </li>
              <li class="chat-item pr-1">
                <a href="" (click)="false" class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                    <div class="status online"></div>
                  </figure>
                  <div class="d-flex align-items-center justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body">John Doe</p>
                      <div class="d-flex align-items-center">
                        <i class="feather icon-arrow-down-left icon-xs text-success mr-1"></i>
                        <p class="text-muted tx-13">Today, 01:42 AM</p>
                      </div>
                    </div>
                    <div class="d-flex flex-column align-items-end">
                      <i class="feather icon-video text-success icon-sm"></i>
                    </div>
                  </div>
                </a>
              </li>
              <li class="chat-item pr-1">
                <a href="" (click)="false" class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                    <div class="status offline"></div>
                  </figure>
                  <div class="d-flex align-items-center justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body">John Doe</p>
                      <div class="d-flex align-items-center">
                        <i class="feather icon-arrow-up-right icon-xs text-success mr-1"></i>
                        <p class="text-muted tx-13">Today, 12:01 AM</p>
                      </div>
                    </div>
                    <div class="d-flex flex-column align-items-end">
                      <i class="feather icon-phone-call text-success icon-sm"></i>
                    </div>
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </ng-template>
      </li>  End calls tab
      <li [ngbNavItem]="3">
        <a ngbNavLink>
          <div class="d-flex flex-row flex-lg-column flex-xl-row align-items-center">
            <i class="feather icon-users icon-xs mr-sm-2 mr-lg-0 mr-xl-2 mb-md-1 mb-xl-0"></i>
            <p class="d-none d-sm-block">Contacts</p>
          </div>
        </a>
        <ng-template ngbNavContent>
          <div class="ps" [perfectScrollbar]>
            <p class="text-muted mb-1">Contacts</p>
            <ul class="list-unstyled chat-list px-1">
              <li class="chat-item pr-1">
                <a href="" (click)="false" class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                    <div class="status offline"></div>
                  </figure>
                  <div class="d-flex align-items-center justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body">Amiah Burton</p>
                      <div class="d-flex align-items-center">
                        <p class="text-muted tx-13">Front-end Developer</p>
                      </div>
                    </div>
                    <div class="d-flex align-items-end text-body">
                      <i class="feather icon-message-square icon-sm text-success mr-2"></i>
                      <i class="feather icon-phone-call icon-sm text-primary mr-2"></i>
                      <i class="feather icon-video icon-sm text-danger"></i>
                    </div>
                  </div>
                </a>
              </li>
              <li class="chat-item pr-1">
                <a href="" (click)="false" class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                    <div class="status online"></div>
                  </figure>
                  <div class="d-flex align-items-center justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body">John Doe</p>
                      <div class="d-flex align-items-center">
                        <p class="text-muted tx-13">Back-end Developer</p>
                      </div>
                    </div>
                    <div class="d-flex align-items-end text-body">
                      <i class="feather icon-message-square icon-sm text-success mr-2"></i>
                      <i class="feather icon-phone-call icon-sm text-primary mr-2"></i>
                      <i class="feather icon-video icon-sm text-danger"></i>
                    </div>
                  </div>
                </a>
              </li>
              <li class="chat-item pr-1">
                <a href="" (click)="false" class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                    <div class="status offline"></div>
                  </figure>
                  <div class="d-flex align-items-center justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body">Yaretzi Mayo</p>
                      <div class="d-flex align-items-center">
                        <p class="text-muted tx-13">Fullstack Developer</p>
                      </div>
                    </div>
                    <div class="d-flex align-items-end text-body">
                      <i class="feather icon-message-square icon-sm text-success mr-2"></i>
                      <i class="feather icon-phone-call icon-sm text-primary mr-2"></i>
                      <i class="feather icon-video icon-sm text-danger"></i>
                    </div>
                  </div>
                </a>
              </li>
              <li class="chat-item pr-1">
                <a href="" (click)="false" class="d-flex align-items-center">
                  <figure class="mb-0 mr-2">
                    <img src="https://via.placeholder.com/37x37" class="img-xs rounded-circle" alt="user">
                    <div class="status offline"></div>
                  </figure>
                  <div class="d-flex align-items-center justify-content-between flex-grow border-bottom">
                    <div>
                      <p class="text-body">John Doe</p>
                      <div class="d-flex align-items-center">
                        <p class="text-muted tx-13">Front-end Developer</p>
                      </div>
                    </div>
                    <div class="d-flex align-items-end text-body">
                      <i class="feather icon-message-square icon-sm text-success mr-2"></i>
                      <i class="feather icon-phone-call icon-sm text-primary mr-2"></i>
                      <i class="feather icon-video icon-sm text-danger"></i>
                    </div>
                  </div>
                </a>
              </li>
            </ul>
          </div>
        </ng-template>
      </li> End contacts tab -->
    </ul>
    <div [ngbNavOutlet]="defaultNav" class="mt-3"></div>
  </div>
</div>
